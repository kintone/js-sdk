{"version":3,"sources":["../src/index.ts","../src/platform/index.ts","../src/platform/node.ts","../src/platform/UnsupportedPlatformError.ts","../package.json","../src/client/KintoneClientOptions/Proxy.ts","../src/client/index.ts","../src/client/KintoneClientOptions/Auth.ts","../src/client/KintoneClientOptions/HttpsAgent.ts","../src/client/KintoneClientOptions/index.ts","../src/client/Middlewares/CsrfMiddleware.ts","../src/client/Middlewares/HttpMethodOverrideMiddleware.ts","../src/client/BodySerializer/FormDataBodySerializer.ts","../src/helpers/iterator.ts"],"sourcesContent":["import { injectPlatformDeps } from \"./platform/index.js\";\nimport nodeDeps from \"./platform/node.js\";\n\ninjectPlatformDeps(nodeDeps);\n\nimport { createClient } from \"./client/index.js\";\nimport { iterator } from \"./helpers/iterator.js\";\n\nexport { createClient, iterator };\n","import type { Agent, ProxyAgent } from \"undici\";\nimport { type AuthOption } from \"../client/KintoneClientOptions/types/Auth.js\";\nimport type { ClientCertAuth } from \"../client/KintoneClientOptions/types/CertAuth.js\";\nimport type { Proxy } from \"../client/KintoneClientOptions/types/Proxy.js\";\n\nexport type PlatformDeps = {\n  getRequestToken: () => Promise<string>;\n  getDefaultAuth: () => AuthOption;\n  buildCertAuth: (certAuth: ClientCertAuth) => { dispatcher: Agent };\n  buildUserAgentHeader: (options: { userAgent?: string }) => {\n    \"User-Agent\"?: string;\n  };\n  buildTimeoutHeader: (options: { socketTimeout?: number }) => {\n    timeout?: number;\n  };\n  buildBaseUrl: (baseUrl?: string) => string;\n  buildProxy: (proxy: Proxy) => { dispatcher: ProxyAgent };\n  getVersion: () => string;\n};\n\nexport const platformDeps: PlatformDeps = {\n  getRequestToken: () => {\n    throw new Error(\"not implemented\");\n  },\n  getDefaultAuth: () => {\n    throw new Error(\"not implemented\");\n  },\n  buildBaseUrl: () => {\n    throw new Error(\"not implemented\");\n  },\n  getVersion: () => {\n    throw new Error(\"not implemented\");\n  },\n  buildCertAuth: () => {\n    throw new Error(\"not implemented\");\n  },\n  buildUserAgentHeader: () => {\n    throw new Error(\"not implemented\");\n  },\n  buildTimeoutHeader: () => {\n    throw new Error(\"not implemented\");\n  },\n  buildProxy: () => {\n    throw new Error(\"not implemented\");\n  },\n};\n\nexport const injectPlatformDeps = (deps: Partial<PlatformDeps>) => {\n  if (deps.getRequestToken) {\n    platformDeps.getRequestToken = deps.getRequestToken;\n  }\n  if (deps.getDefaultAuth) {\n    platformDeps.getDefaultAuth = deps.getDefaultAuth;\n  }\n  if (deps.buildCertAuth) {\n    platformDeps.buildCertAuth = deps.buildCertAuth;\n  }\n  if (deps.buildUserAgentHeader) {\n    platformDeps.buildUserAgentHeader = deps.buildUserAgentHeader;\n  }\n  if (deps.buildTimeoutHeader) {\n    platformDeps.buildTimeoutHeader = deps.buildTimeoutHeader;\n  }\n  if (deps.buildBaseUrl) {\n    platformDeps.buildBaseUrl = deps.buildBaseUrl;\n  }\n  if (deps.getVersion) {\n    platformDeps.getVersion = deps.getVersion;\n  }\n  if (deps.buildProxy) {\n    platformDeps.buildProxy = deps.buildProxy;\n  }\n};\n","import fs from \"node:fs\";\nimport { UnsupportedPlatformError } from \"./UnsupportedPlatformError.js\";\nimport os from \"os\";\nimport { Agent } from \"undici\";\nimport type { PlatformDeps } from \"./index.js\";\nimport type { ClientCertAuth } from \"../client/KintoneClientOptions/types/CertAuth.js\";\nimport packageJson from \"../../package.json\";\nimport type { Proxy } from \"../client/KintoneClientOptions/types/Proxy.js\";\nimport { buildProxy as _buildProxy } from \"../client/KintoneClientOptions/Proxy.js\";\n\nconst getRequestToken = () => {\n  throw new UnsupportedPlatformError(\"Node.js\");\n};\n\nconst getDefaultAuth = () => {\n  throw new UnsupportedPlatformError(\"Node.js\");\n};\n\nconst buildCertAuth = (certAuth: ClientCertAuth): { dispatcher: Agent } => {\n  const agent = new Agent({\n    connect: {\n      pfx:\n        \"pfx\" in certAuth\n          ? certAuth.pfx\n          : fs.readFileSync(certAuth.pfxFilePath),\n      passphrase: certAuth.password,\n    },\n  });\n\n  return { dispatcher: agent };\n};\n\nconst buildTimeoutHeader = (options: { socketTimeout?: number }) => {\n  if (options.socketTimeout) {\n    return { timeout: options.socketTimeout };\n  }\n\n  return {};\n};\n\nconst buildUserAgentHeader = (options: { userAgent?: string }) => {\n  const { userAgent } = options;\n  return userAgent !== undefined\n    ? {\n        \"User-Agent\": `Node.js/${process.version}(${os.type()}) ${\n          packageJson.name\n        }@${packageJson.version}${userAgent ? ` ${userAgent}` : \"\"}`,\n      }\n    : {};\n};\n\nconst buildBaseUrl = (baseUrl: string | undefined) => {\n  if (typeof baseUrl === \"undefined\") {\n    throw new Error(\"in Node.js environment, baseUrl is required\");\n  }\n  return baseUrl;\n};\n\nconst getVersion = () => {\n  return packageJson.version;\n};\n\nconst buildProxy = (proxy: Proxy) => {\n  return _buildProxy(proxy);\n};\n\nexport default {\n  getRequestToken,\n  getDefaultAuth,\n  buildCertAuth,\n  buildUserAgentHeader,\n  buildTimeoutHeader,\n  buildBaseUrl,\n  getVersion,\n  buildProxy,\n} as PlatformDeps;\n","type Platform = \"Browser\" | \"Node.js\";\n\nexport class UnsupportedPlatformError extends Error {\n  public platform: Platform;\n\n  constructor(platform: Platform) {\n    const message = `This function is not supported in ${platform} environment`;\n    super(message);\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, UnsupportedPlatformError);\n    }\n\n    this.name = \"UnsupportedPlatformError\";\n    this.platform = platform;\n\n    // https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    // Set the prototype explicitly.\n    Object.setPrototypeOf(this, UnsupportedPlatformError.prototype);\n  }\n}\n","{\n  \"name\": \"@kintone/rest\",\n  \"version\": \"0.0.1\",\n  \"description\": \"kintone REST API Client for JavaScript\",\n  \"keywords\": [\n    \"kintone\",\n    \"rest\",\n    \"api-client\"\n  ],\n  \"homepage\": \"https://github.com/kintone/js-sdk/tree/main/packages/rest#readme\",\n  \"bugs\": {\n    \"url\": \"https://github.com/kintone/js-sdk/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/kintone/js-sdk.git\",\n    \"directory\": \"packages/rest\"\n  },\n  \"license\": \"Apache-2.0\",\n  \"author\": {\n    \"name\": \"Cybozu, Inc.\",\n    \"url\": \"https://cybozu.co.jp\"\n  },\n  \"type\": \"module\",\n  \"exports\": {\n    \".\": {\n      \"node\": {\n        \"import\": \"./lib/index.js\",\n        \"require\": \"./lib/index.cjs\",\n        \"default\": \"./lib/index.js\"\n      },\n      \"browser\": \"./lib/index.browser.js\"\n    },\n    \"./package.json\": \"./package.json\"\n  },\n  \"main\": \"lib/index.cjs\",\n  \"module\": \"lib/index.js\",\n  \"types\": \"lib/index.d.ts\",\n  \"files\": [\n    \"CHANGELOG.md\",\n    \"esm\",\n    \"lib\",\n    \"!**/*.tsbuildinfo\"\n  ],\n  \"scripts\": {\n    \"prebuild\": \"pnpm clean\",\n    \"build\": \"tsc --build --force && pnpm postbuild\",\n    \"build:vite\": \"vite build\",\n    \"build:tsup\": \"tsup\",\n    \"postbuild\": \"node scripts/copy-schemas.js\",\n    \"build:rollup_umd_dev\": \"rollup -c --environment BUILD:development\",\n    \"build:rollup_umd_prod\": \"rollup -c --environment BUILD:production\",\n    \"build:vite_umd_dev\": \"BUILD=development vite build\",\n    \"build:vite_umd_prod\": \"BUILD=production vite build\",\n    \"clean\": \"rimraf lib esm umd\",\n    \"fix\": \"pnpm lint:eslint --fix\",\n    \"lint\": \"run-s lint:*\",\n    \"lint:eslint\": \"eslint . --max-warnings 0\",\n    \"lint:package\": \"publint --strict\",\n    \"start\": \"tsc --build --force --watch\",\n    \"test\": \"jest\",\n    \"test:ci\": \"jest --runInBand\",\n    \"test:e2e\": \"jest --config=jest.e2e.config.js\"\n  },\n  \"dependencies\": {\n    \"core-js\": \"^3.41.0\",\n    \"fs\": \"0.0.1-security\",\n    \"js-base64\": \"^3.7.7\",\n    \"openapi-fetch\": \"^0.13.5\",\n    \"openapi-typescript\": \"^7.6.1\",\n    \"openapi-typescript-helpers\": \"^0.0.15\",\n    \"undici\": \"^7.4.0\"\n  },\n  \"devDependencies\": {\n    \"@rollup/plugin-babel\": \"^6.0.4\",\n    \"@rollup/plugin-commonjs\": \"^26.0.3\",\n    \"@rollup/plugin-json\": \"^6.1.0\",\n    \"@rollup/plugin-node-resolve\": \"^15.3.1\",\n    \"@rollup/plugin-terser\": \"^0.4.4\",\n    \"@types/rollup-plugin-node-builtins\": \"^2.1.5\",\n    \"@types/rollup-plugin-node-globals\": \"^1.4.5\",\n    \"rollup\": \"^4.38.0\",\n    \"rollup-plugin-ecma-version-validator\": \"^0.2.13\",\n    \"rollup-plugin-license\": \"^3.6.0\",\n    \"rollup-plugin-node-builtins\": \"^2.1.2\",\n    \"rollup-plugin-node-globals\": \"^1.4.0\",\n    \"rollup-plugin-polyfill-node\": \"^0.13.0\",\n    \"tsup\": \"^8.4.0\",\n    \"vite\": \"^5.4.15\",\n    \"vite-plugin-dts\": \"^4.5.3\"\n  },\n  \"engines\": {\n    \"node\": \">=18\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\"\n  }\n}\n","import { ProxyAgent } from \"undici\";\nimport type { Proxy } from \"./types/Proxy.js\";\n\nexport const buildProxy = (proxy: Proxy): { dispatcher: ProxyAgent } => {\n  const protocol = proxy.protocol ?? \"http\";\n  if (proxy.auth === undefined) {\n    return {\n      dispatcher: new ProxyAgent({\n        uri: `${protocol}://${proxy.host}:${proxy.port}`,\n      }),\n    };\n  }\n  return {\n    dispatcher: new ProxyAgent({\n      uri: `${protocol}://${proxy.auth.username}:${proxy.auth.password}@${proxy.host}:${proxy.port}`,\n    }),\n  };\n};\n","import type { Client } from \"openapi-fetch\";\nimport createNativeClient from \"openapi-fetch\";\nimport type { paths } from \"../schemas/schema.js\";\nimport type { MediaType } from \"openapi-typescript-helpers\";\nimport {\n  buildNativeClientOptions,\n  type KintoneClientOptions,\n} from \"./KintoneClientOptions/index.js\";\nimport { getCsrfMiddleware } from \"./Middlewares/CsrfMiddleware.js\";\nimport { isSessionAuth } from \"./KintoneClientOptions/Auth.js\";\nimport { getHttpMethodOverrideMiddleware } from \"./Middlewares/HttpMethodOverrideMiddleware.js\";\nimport { getFormDataBodySerializer } from \"./BodySerializer/FormDataBodySerializer.js\";\n\nexport const createClient = (\n  clientOptions: KintoneClientOptions,\n): Client<paths> => {\n  return _createClient<paths>(clientOptions);\n};\n\nconst _createClient = <Paths extends {}, Media extends MediaType = MediaType>(\n  clientOptions: KintoneClientOptions,\n): Client<Paths, Media> => {\n  const nativeClientOptions = buildNativeClientOptions(clientOptions);\n  nativeClientOptions.bodySerializer = getFormDataBodySerializer();\n  const client = createNativeClient<Paths, Media>(nativeClientOptions);\n\n  if (isSessionAuth(clientOptions.auth)) {\n    client.use(getCsrfMiddleware());\n  }\n  client.use(getHttpMethodOverrideMiddleware());\n\n  return client;\n};\n","import type { AuthOption, SessionAuth } from \"./types/Auth.js\";\n\nimport { Base64 } from \"js-base64\";\n\ntype AuthHeader =\n  | {\n      \"X-Cybozu-Authorization\": string;\n    }\n  | {\n      \"X-Cybozu-API-Token\": string;\n    }\n  | {\n      Authorization: string;\n    }\n  | {\n      \"X-Requested-With\": \"XMLHttpRequest\";\n    }\n  | {};\n\nexport const buildAuth = (_auth: AuthOption): AuthHeader => {\n  switch (_auth.type) {\n    case \"password\": {\n      return {\n        \"X-Cybozu-Authorization\": Base64.encode(\n          `${_auth.username}:${_auth.password}`,\n        ),\n      };\n    }\n    case \"apiToken\": {\n      const apiToken = _auth.apiToken;\n      return {\n        \"X-Cybozu-API-Token\": Array.isArray(apiToken)\n          ? apiToken.join(\",\")\n          : apiToken,\n      };\n    }\n    case \"oauth\": {\n      return {\n        Authorization: `Bearer ${_auth.oAuthToken}`,\n      };\n    }\n    case \"session\":\n    default:\n      return {\n        \"X-Requested-With\": \"XMLHttpRequest\",\n      };\n  }\n};\n\nexport const isSessionAuth = (\n  _auth: AuthOption | undefined,\n): _auth is SessionAuth => {\n  return (\n    _auth === undefined ||\n    Object.keys(_auth).length === 0 ||\n    _auth.type === \"session\"\n  );\n};\n","import type { Agent as HttpsAgent } from \"undici\";\n\nexport const buildHttpsAgent = (\n  agent: HttpsAgent,\n): { dispatcher: HttpsAgent } => {\n  return { dispatcher: agent };\n};\n","import type { Agent as HttpsAgent } from \"undici\";\nimport { buildAuth } from \"./Auth.js\";\n\nimport type { ClientOptions } from \"openapi-fetch\";\nimport type { AuthOption, BasicAuthOption } from \"./types/Auth.js\";\nimport type { Proxy } from \"./types/Proxy.js\";\nimport type { ClientCertAuth } from \"./types/CertAuth.js\";\nimport { buildHttpsAgent } from \"./HttpsAgent.js\";\nimport { platformDeps } from \"../../platform/index.js\";\n\nexport type KintoneClientOptions = ClientOptions & {\n  auth?: AuthOption;\n  basicAuth?: BasicAuthOption;\n  userAgent?: string;\n  socketTimeout?: number;\n} & (\n    | {\n        proxy?: Proxy;\n        httpsAgent?: never;\n        certAuth?: never;\n      }\n    | {\n        proxy?: never;\n        httpsAgent?: HttpsAgent;\n        certAuth?: never;\n      }\n    | {\n        proxy?: never;\n        httpsAgent?: never;\n        certAuth?: ClientCertAuth;\n      }\n  );\n\nexport const buildNativeClientOptions = (\n  _clientOptions: KintoneClientOptions,\n): ClientOptions => {\n  const baseUrl = platformDeps\n    .buildBaseUrl(_clientOptions.baseUrl)\n    .replace(/\\/+$/, \"\"); // Remove trailing slash\n  const authHeader = buildAuth(\n    _clientOptions.auth ?? platformDeps.getDefaultAuth(),\n  );\n  const userAgentHeader = platformDeps.buildUserAgentHeader({\n    userAgent: _clientOptions.userAgent,\n  });\n  const timeoutOption =\n    _clientOptions.socketTimeout !== undefined\n      ? platformDeps.buildTimeoutHeader({\n          socketTimeout: _clientOptions.socketTimeout,\n        })\n      : {};\n  const proxyOption =\n    _clientOptions.proxy !== undefined\n      ? platformDeps.buildProxy(_clientOptions.proxy)\n      : {};\n  const httpsAgentOption =\n    _clientOptions.httpsAgent !== undefined\n      ? buildHttpsAgent(_clientOptions.httpsAgent)\n      : {};\n  const certAuthOption =\n    _clientOptions.certAuth !== undefined\n      ? platformDeps.buildCertAuth(_clientOptions.certAuth)\n      : {};\n\n  return {\n    fetch: _clientOptions.fetch,\n    Request: _clientOptions.Request,\n    querySerializer: _clientOptions.querySerializer,\n    bodySerializer: _clientOptions.bodySerializer,\n    baseUrl: baseUrl,\n    headers: {\n      ..._clientOptions.headers,\n      ...authHeader,\n      ...userAgentHeader,\n    },\n    requestInitExt: {\n      ..._clientOptions.requestInitExt,\n      ...proxyOption,\n      ...httpsAgentOption,\n      ...certAuthOption,\n    },\n    ...timeoutOption,\n  };\n};\n","/* eslint-disable n/no-unsupported-features/node-builtins */\nimport type { Middleware, MiddlewareCallbackParams } from \"openapi-fetch\";\nimport { platformDeps } from \"../../platform/index.js\";\n\nexport const getCsrfMiddleware = (): Middleware => {\n  return {\n    async onRequest({ request }: MiddlewareCallbackParams) {\n      if (request.method === \"GET\") {\n        return request;\n      }\n\n      if (\n        request.headers.get(\"content-type\")?.includes(\"multipart/form-data\")\n      ) {\n        const formData = await request.formData();\n        if (!formData.has(\"__REQUEST_TOKEN__\")) {\n          formData.append(\n            \"__REQUEST_TOKEN__\",\n            await platformDeps.getRequestToken(),\n          );\n        }\n        return new Request(request.url, {\n          method: request.method,\n          headers: request.headers,\n          body: formData,\n        });\n      }\n\n      const body = (await request.json()) as Record<string, unknown>;\n      body.__REQUEST_TOKEN__ = await platformDeps.getRequestToken();\n      return new Request(request.url, {\n        method: request.method,\n        headers: request.headers,\n        body: JSON.stringify(body),\n      });\n    },\n  };\n};\n","/* eslint-disable n/no-unsupported-features/node-builtins */\nimport type { Middleware } from \"openapi-fetch\";\n\nconst THRESHOLD_AVOID_REQUEST_URL_TOO_LARGE = 4096;\n\nexport const getHttpMethodOverrideMiddleware = (): Middleware => {\n  return {\n    async onRequest({ request, params }) {\n      if (request.method !== \"GET\") {\n        return request;\n      }\n      if (request.url.length <= THRESHOLD_AVOID_REQUEST_URL_TOO_LARGE) {\n        return request;\n      }\n      const _url = new URL(request.url);\n      const body = params.query;\n      const newHeaders = new Headers(request.headers);\n      newHeaders.set(\"X-HTTP-Method-Override\", \"GET\");\n      newHeaders.set(\"Content-Type\", \"application/json\");\n\n      return new Request(_url.origin + _url.pathname, {\n        method: \"POST\",\n        headers: newHeaders,\n        body: JSON.stringify(body),\n      });\n    },\n  };\n};\n","import { defaultBodySerializer } from \"openapi-fetch\";\n\nexport type BodySerializer = (body: unknown) => unknown;\n\nexport const getFormDataBodySerializer = (): BodySerializer => {\n  return (body: unknown) => {\n    if (body && typeof body === \"object\") {\n      const obj = body as Record<string, unknown>;\n      for (const key in obj) {\n        // eslint-disable-next-line n/no-unsupported-features/node-builtins\n        if (obj[key] instanceof FormData) {\n          return obj[key];\n        }\n      }\n    }\n    return defaultBodySerializer(body);\n  };\n};\n","import type { Client, FetchResponse, MaybeOptionalInit } from \"openapi-fetch\";\nimport type {\n  HttpMethod,\n  MediaType,\n  PathsWithMethod,\n} from \"openapi-typescript-helpers\";\n\ntype InitParam<Init> = Init & { [key: string]: unknown };\n\ntype CreateIteratorMethod<\n  Paths extends Record<string, Record<HttpMethod, {}>>,\n  Method extends HttpMethod,\n  Media extends MediaType,\n> = <\n  Path extends PathsWithMethod<Paths, Method>,\n  Init extends MaybeOptionalInit<Paths[Path], Method>,\n>(\n  url: Path,\n  handleRequest: (\n    previousInit: InitParam<Init>,\n    previousResult: FetchResponse<Paths[Path][Method], Init, Media> | null,\n  ) => InitParam<Init>,\n  hasNext: (\n    init: InitParam<Init>,\n    response: FetchResponse<Paths[Path][Method], Init, Media> | null,\n  ) => boolean,\n  init: InitParam<Init>,\n) => AsyncGenerator<FetchResponse<Paths[Path][Method], Init, Media>>;\n\ntype CreateRequestIteratorMethod<\n  Paths extends Record<string, Record<HttpMethod, {}>>,\n  Media extends MediaType,\n> = <\n  Method extends HttpMethod,\n  Path extends PathsWithMethod<Paths, Method>,\n  Init extends MaybeOptionalInit<Paths[Path], Method>,\n>(\n  method: Method,\n  url: Path,\n  handleRequest: (\n    previousInit: InitParam<Init>,\n    previousResult: FetchResponse<Paths[Path][Method], Init, Media> | null,\n  ) => InitParam<Init>,\n  hasNext: (\n    init: InitParam<Init>,\n    response: FetchResponse<Paths[Path][Method], Init, Media> | null,\n  ) => boolean,\n  init: InitParam<Init>,\n) => AsyncGenerator<FetchResponse<Paths[Path][Method], Init, Media>>;\n\ninterface ClientIterator<\n  Paths extends {} = any,\n  Media extends MediaType = any,\n> {\n  request: CreateRequestIteratorMethod<Paths, Media>;\n  GET: CreateIteratorMethod<Paths, \"get\", Media>;\n  PUT: CreateIteratorMethod<Paths, \"put\", Media>;\n  POST: CreateIteratorMethod<Paths, \"post\", Media>;\n  DELETE: CreateIteratorMethod<Paths, \"delete\", Media>;\n  OPTIONS: CreateIteratorMethod<Paths, \"options\", Media>;\n  HEAD: CreateIteratorMethod<Paths, \"head\", Media>;\n  PATCH: CreateIteratorMethod<Paths, \"patch\", Media>;\n  TRACE: CreateIteratorMethod<Paths, \"trace\", Media>;\n}\n\nexport const iterator = <Paths extends {} = any, Media extends MediaType = any>(\n  client: Client<Paths, Media>,\n): ClientIterator<Paths, Media> => {\n  // eslint-disable-next-line func-style\n  async function* createRequestIteratorMethod(\n    method: HttpMethod,\n    url: any,\n    handleRequest: (init: any, previousResult: any) => any,\n    hasNext: (init: any, response: any) => boolean,\n    init: any,\n  ) {\n    let _init = init;\n    let response = null;\n    while (true) {\n      if (!hasNext(_init, response)) {\n        return;\n      }\n      _init = handleRequest(_init, response);\n\n      response = await client.request(method, url, _init);\n      yield response;\n    }\n  }\n\n  return {\n    request: (method, url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(method, url, handleRequest, hasNext, init),\n    GET: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"get\", url, handleRequest, hasNext, init),\n    PUT: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"put\", url, handleRequest, hasNext, init),\n    POST: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"post\", url, handleRequest, hasNext, init),\n    DELETE: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"delete\", url, handleRequest, hasNext, init),\n    OPTIONS: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"options\", url, handleRequest, hasNext, init),\n    HEAD: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"head\", url, handleRequest, hasNext, init),\n    PATCH: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"patch\", url, handleRequest, hasNext, init),\n    TRACE: (url, handleRequest, hasNext, init) =>\n      createRequestIteratorMethod(\"trace\", url, handleRequest, hasNext, init),\n  };\n};\n"],"mappings":"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","names":["index_exports","__export","createClient","iterator","__toCommonJS","platformDeps","injectPlatformDeps","deps","import_node_fs","UnsupportedPlatformError","_UnsupportedPlatformError","platform","message","import_os","import_undici","package_default","import_undici","buildProxy","proxy","protocol","getRequestToken","UnsupportedPlatformError","getDefaultAuth","buildCertAuth","certAuth","fs","buildTimeoutHeader","options","buildUserAgentHeader","userAgent","os","package_default","buildBaseUrl","baseUrl","getVersion","buildProxy","proxy","node_default","import_openapi_fetch","import_js_base64","buildAuth","_auth","apiToken","isSessionAuth","buildHttpsAgent","agent","buildNativeClientOptions","_clientOptions","baseUrl","platformDeps","authHeader","buildAuth","userAgentHeader","timeoutOption","proxyOption","httpsAgentOption","buildHttpsAgent","certAuthOption","getCsrfMiddleware","request","formData","platformDeps","body","getHttpMethodOverrideMiddleware","request","params","_url","body","newHeaders","import_openapi_fetch","getFormDataBodySerializer","body","obj","key","createClient","clientOptions","_createClient","nativeClientOptions","buildNativeClientOptions","getFormDataBodySerializer","client","createNativeClient","isSessionAuth","getCsrfMiddleware","getHttpMethodOverrideMiddleware","iterator","client","createRequestIteratorMethod","method","url","handleRequest","hasNext","init","_init","response","injectPlatformDeps","node_default"]}