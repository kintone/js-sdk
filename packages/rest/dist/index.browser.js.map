{"version":3,"sources":["../src/platform/browser.ts","../src/index.browser.ts"],"sourcesContent":["import { UnsupportedPlatformError } from \"./UnsupportedPlatformError.js\";\nimport type { AuthOption } from \"../client/KintoneClientOptions/types/Auth.js\";\nimport type { PlatformDeps } from \"./index.js\";\nimport packageJson from \"../../package.json\";\nimport type { Proxy } from \"../client/KintoneClientOptions/types/Proxy.js\";\n\ndeclare let kintone: {\n  getRequestToken(): string;\n};\n\ndeclare let garoon: {\n  connect: {\n    kintone: {\n      getRequestToken(): Promise<string>;\n    };\n  };\n};\n\nconst getRequestToken = async () => {\n  if (\n    typeof kintone === \"object\" &&\n    kintone !== null &&\n    typeof kintone.getRequestToken === \"function\"\n  ) {\n    return kintone.getRequestToken();\n  }\n\n  if (\n    typeof garoon === \"object\" &&\n    garoon !== null &&\n    typeof garoon.connect?.kintone?.getRequestToken === \"function\"\n  ) {\n    return garoon.connect.kintone.getRequestToken();\n  }\n\n  throw new Error(\"session authentication must specify a request token\");\n};\n\nconst getDefaultAuth = (): AuthOption => {\n  return {\n    type: \"session\",\n  };\n};\n\nconst buildCertAuth = () => {\n  throw new UnsupportedPlatformError(\"Browser\");\n};\n\nconst buildTimeoutHeader = () => {\n  return {};\n};\n\nconst buildUserAgentHeader = (options: { userAgent?: string }) => {\n  return options.userAgent !== undefined\n    ? { \"User-Agent\": options.userAgent }\n    : {};\n};\n\nconst buildBaseUrl = (baseUrl?: string) => {\n  if (baseUrl) {\n    return baseUrl;\n  }\n\n  if (location === undefined) {\n    throw new Error(\"The baseUrl parameter is required for this environment\");\n  }\n\n  const { host, protocol } = location;\n\n  return `${protocol}//${host}`;\n};\n\nconst getVersion = () => {\n  return packageJson.version;\n};\n\nconst buildProxy = (proxy: Proxy) => {\n  throw new UnsupportedPlatformError(\"Browser\");\n};\n\nexport default {\n  getRequestToken,\n  getDefaultAuth,\n  buildCertAuth,\n  buildUserAgentHeader,\n  buildTimeoutHeader,\n  buildBaseUrl,\n  getVersion,\n  buildProxy,\n} as PlatformDeps;\n","import { injectPlatformDeps } from \"./platform/index.js\";\nimport browserDeps from \"./platform/browser.js\";\n\ninjectPlatformDeps(browserDeps);\n\nimport { createClient } from \"./client/index.js\";\nimport { iterator } from \"./helpers/iterator.js\";\n\nexport { createClient, iterator };\n"],"mappings":"oEAkBA,IAAMA,EAAkB,SAAY,CAClC,GACE,OAAO,SAAY,UACnB,UAAY,MACZ,OAAO,QAAQ,iBAAoB,WAEnC,OAAO,QAAQ,gBAAgB,EAGjC,GACE,OAAO,QAAW,UAClB,SAAW,MACX,OAAO,OAAO,SAAS,SAAS,iBAAoB,WAEpD,OAAO,OAAO,QAAQ,QAAQ,gBAAgB,EAGhD,MAAM,IAAI,MAAM,qDAAqD,CACvE,EAEMC,EAAiB,KACd,CACL,KAAM,SACR,GAGIC,EAAgB,IAAM,CAC1B,MAAM,IAAIC,EAAyB,SAAS,CAC9C,EAEMC,EAAqB,KAClB,CAAC,GAGJC,EAAwBC,GACrBA,EAAQ,YAAc,OACzB,CAAE,aAAcA,EAAQ,SAAU,EAClC,CAAC,EAGDC,EAAgBC,GAAqB,CACzC,GAAIA,EACF,OAAOA,EAGT,GAAI,WAAa,OACf,MAAM,IAAI,MAAM,wDAAwD,EAG1E,GAAM,CAAE,KAAAC,EAAM,SAAAC,CAAS,EAAI,SAE3B,MAAO,GAAGA,CAAQ,KAAKD,CAAI,EAC7B,EAEME,EAAa,IACVC,EAAY,QAGfC,EAAcC,GAAiB,CACnC,MAAM,IAAIX,EAAyB,SAAS,CAC9C,EAEOY,EAAQ,CACb,gBAAAf,EACA,eAAAC,EACA,cAAAC,EACA,qBAAAG,EACA,mBAAAD,EACA,aAAAG,EACA,WAAAI,EACA,WAAAE,CACF,ECtFAG,EAAmBC,CAAW","names":["getRequestToken","getDefaultAuth","buildCertAuth","UnsupportedPlatformError","buildTimeoutHeader","buildUserAgentHeader","options","buildBaseUrl","baseUrl","host","protocol","getVersion","package_default","buildProxy","proxy","browser_default","injectPlatformDeps","browser_default"]}